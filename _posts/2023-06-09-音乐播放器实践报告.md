---
layout: post
title: 音乐播放器实践报告
date: 2023-06-09 09:43 +0800
categories: [Vue实训]
tags: [课程,报告]     # TAG 名称应始终小写
author: master
---
**一、项目****需求分析**

音乐的魅力在生活中是极其大的,不同的国家、不同语言的人,可以从音乐中体会到相同的情感,可以加强人与人之间的联系, 我们也可以从音乐中了解他国, 因为音乐是人类共同的食粮, 它也可以让身体放轻松, 解压力, 避免因自律神经紧张失调而导致慢性疾病的产生。可以,解忧郁苦闷的心情,甚至可以做到某些程度的心灵治疗。因此为使人们能够随时听到音乐, 音乐播放器则应时被创造出来了, 它为用户提供了便利, 使得人们可以通过WEB网页在任何时候欣赏到音乐, 为了使音乐播放器出现, 必须依据手机为载体通过设计出一个基于WEB系统的音乐播放器。

1.歌曲搜索：允许用户通过关键词搜索歌曲，并显示搜索结果列表。

2.歌曲播放：提供歌曲的播放、暂停、上一曲、下一曲等基本播放控制功能。

3.歌单管理：允许用户创建、编辑和删除歌单，并将收藏的歌曲添加到歌单中。

4.排行榜：显示热门歌曲排行榜，包括全球榜、华语榜等。

5.评论功能：可以让用户根据听歌后的感受撰写评论，并且可以分享

**二、项目总体设计**

1.歌曲搜索功能：

提供用户界面的搜索框，允许用户输入关键词进行歌曲搜索。

调用第三方音乐接口，如网易云音乐API，发送请求并获取搜索结果。

将搜索结果以列表的形式展示给用户，显示歌曲的基本信息，如歌曲名、歌手、专辑等。

2.第三方音乐接口调用：

使用合适的第三方音乐接口，如网易云音乐API，通过发送HTTP请求获取音乐相关的数据，如歌曲信息、歌曲链接等。

处理接口返回的数据，提取所需的信息，并进行适当的处理和展示。

3.歌曲列表：

在用户界面上展示歌曲列表，包括搜索结果列表、歌单中的歌曲列表等。

显示每首歌曲的基本信息，如歌曲名、歌手、专辑封面等。

提供点击歌曲列表中的歌曲，触发播放功能。

4.播放功能：

允许用户点击歌曲列表中的歌曲，实现歌曲的播放功能。

调用第三方音乐接口获取歌曲的音频链接。

使用合适的音频播放器组件，如HTML5音频标签或其他相关技术，进行歌曲的播放、暂停、上一曲、下一曲等基本控制操作。

显示当前播放的歌曲信息，如歌曲名、歌手、专辑封面等。

5.胶盘的旋转：

在播放功能中，通过合适的CSS样式或JavaScript动画效果，实现胶盘的旋转效果。

根据当前歌曲的播放状态，控制胶盘的旋转速度和方向。

歌曲图片的替换旋转：

根据当前播放的歌曲，从第三方音乐接口获取相应的歌曲图片。

根据播放状态和胶盘的旋转效果，控制歌曲图片的替换和旋转效果。

6.评论的获取：

调用第三方音乐接口，获取当前歌曲的评论信息。

将评论信息展示给用户，包括评论的内容、评论者的信息等。

**三、程序模块设计与实现**

**1.** **功能需求：**

(1)歌曲搜索模块：

\- 提供搜索框供用户输入关键词搜索歌曲。

\- 调用网易云音乐的API或其他相关接口进行歌曲搜索。

\- 将搜索结果以列表的形式展示给用户，显示歌曲的基本信息，如歌曲名、歌手、专辑等。

(2)歌曲播放模块：

\- 提供歌曲的播放、暂停、上一曲、下一曲等基本控制按钮。

\- 加载选定歌曲的音频资源，并通过HTML5音频标签或其他相关技术进行播放。

\- 显示当前播放的歌曲信息，如歌曲名、歌手、专辑封面等。

(3)歌单管理模块：

\- 允许用户创建、编辑和删除歌单。

\- 提供添加、删除歌曲到歌单的功能。

\- 显示用户已创建的歌单列表，并提供对歌单的编辑和删除操作。

(4)排行榜模块：

\- 显示热门歌曲的排行榜，包括全球榜、华语榜等。

\- 点击排行榜中的歌曲可进行播放。

\- 提供对排行榜的更新和刷新功能。

(5)评论功能模块：

\- 允许用户根据听歌后的感受撰写评论。

\- 提供评论提交和显示功能。

\- 可以将评论分享给其他用户或社交媒体。

**2.** **用户界面设计：**

根据功能需求，设计用户界面可以包括以下页面和组件：

(1)主页：

\- 包含搜索框和搜索结果列表，用于歌曲搜索。

\- 显示当前播放的歌曲信息和基本控制按钮。

(2)歌单页面：

\- 显示用户创建的歌单列表，包括歌单名称和封面。

\- 点击进入具体歌单页面，显示歌单中的歌曲列表和编辑、删除操作按钮。

(3)排行榜页面：

\- 显示热门歌曲排行榜，包括全球榜、华语榜等。

\- 点击排行榜中的歌曲进入播放页面。

(4)播放页面：

\- 显示当前播放的歌曲信息，如歌曲名、歌手、专辑封面等。

\- 提供播放、暂停、上一曲、下一曲等基本控制按钮。

\- 包含评论区域，用户可以撰写评论并提交。

**3****．****Vue****组件**

（1）双向绑定

Vue中可以使用v-model指令实现双向绑定，将表单元素的值与Vue实例中的数据进行关联，实现数据的双向同步。

（2）vue指令

Vue提供了多种指令，用于操作DOM元素和Vue实例之间的交互。常用的指令包括v-bind、v-if、v-show、v-for等。这些指令可以通过在HTML元素上添加相应的指令进行使用。

（3）计算属性、侦听器

Vue中的计算属性和侦听器用于处理响应式数据的变化。

计算属性是基于Vue实例的响应式数据进行计算，并返回计算结果。计算属性具有缓存机制，只有依赖的响应式数据发生改变时，才会重新计算。

侦听器（watcher）用于监听指定的响应式数据，并在数据变化时执行相应的操作。通过在Vue实例中定义watch选项，可以设置侦听器。

（4）vue事件绑定及行为阻止

Vue可以通过v-on指令实现事件绑定，将DOM事件与Vue实例中的方法进行关联。可以通过事件修饰符（如.prevent、.stop等）来控制事件的行为。

.prevent修饰符用于阻止事件的默认行为。

.stop修饰符用于阻止事件冒泡。

（5）axios异步通信

Axios是一个基于Promise的HTTP客户端，用于进行异步通信。在Vue项目中，可以使用Axios发送HTTP请求，与后端进行数据交互。

通过Axios发送GET、POST等HTTP请求，并处理返回的数据。

可以在Vue组件的生命周期钩子函数中使用Axios进行数据获取和更新。

以上是Vue组件中常用的功能和技术点，它们可以在Vue的组件中灵活应用

（6）promise的作用

Promise是一种用于处理异步操作的对象，它可以将异步操作的结果以回调函数的方式进行处理，使得异步代码的编写更加简洁和可读性更高。

Promise的主要作用包括：

处理异步操作：Promise可以处理异步操作，如异步请求、文件读取、定时器等。

解决回调地狱问题：Promise通过链式调用的方式，可以避免回调函数嵌套过深的问题，提高代码的可读性和维护性。

提供异步操作的状态和结果：Promise有三种状态：pending（进行中）、fulfilled（已成功）和rejected（已失败），可以通过then方法获取异步操作的结果。

支持异常处理：Promise可以通过catch方法捕获异步操作中的错误，并进行相应的处理。

（7）vue3中ES6的导入

在Vue 3中，可以使用ES6的导入语法来引入其他模块、组件或函数。

导入语法示例：

// 导入单个模块

import { module } from './module';

// 导入默认导出的模块

import module from './module';

// 导入所有导出的内容

import * as module from './module';

（8）vue3中ajax请求发送位置

在Vue 3中，可以在组件的生命周期钩子函数或方法中发送AJAX请求。常见的位置包括：

在created钩子函数中发送初始化数据请求。

在事件处理函数中发送请求，如按钮点击事件等。

在方法中根据需要发送请求，比如在点击某个元素时触发的方法中发送请求。

（9）get请求的参数拼写

在GET请求中，参数可以通过查询字符串的形式拼接在URL的后面。通常的拼写方式是将参数名和值用等号连接，多个参数之间使用&符号进行连接。

示例：https://example.com/api?param1=value1&param2=value2

（10）mvc和mvvm设计模式

MVC（Model-View-Controller）是一种软件设计模式，用于分离应用程序的关注点，包括数据（Model）、用户界面（View）和业务逻辑（Controller）。

MVVM（Model-View-ViewModel）是一种衍生自MVC的设计模式，它将数据的展示和用户交互分离开来。在MVVM中，ViewModel充当了Controller的角色，负责处理用户交互和业务逻辑，并与View和Model进行双向数据绑定。

（11）v-if和v-show的区别

编译时机：

v-if：在条件为真时，元素及其内容会被编译和渲染到DOM中。在条件为假时，元素及其内容不会被编译和渲染，直接从DOM中移除。

v-show：无论条件是真还是假，元素都会被编译和渲染到DOM中，只是通过CSS的display属性来控制元素的显示或隐藏。

初始渲染开销：

v-if：在初始渲染时，如果条件为假，元素不会被渲染到DOM中，从而减少了初始渲染的开销。

v-show：无论条件是真还是假，元素都会被渲染到DOM中，因此初始渲染的开销较大。

切换开销：

v-if：在条件发生变化时，如果条件从假变为真，元素会被编译和渲染到DOM中；如果条件从真变为假，元素会从DOM中移除。

v-show：在条件发生变化时，如果条件从假变为真，元素通过修改CSS的display属性来显示；如果条件从真变为假，元素通过修改CSS的display属性来隐藏。因此，切换时只是修改了CSS属性，开销较小。

频繁切换：

v-if：适合在条件不经常发生变化的情况下使用，因为切换时有较大的开销。

v-show：适合在条件需要频繁切换的情况下使用，因为切换时开销较小。

**2****．****项目实现**

（1）歌曲搜索功能
```javascript
searchSong() {
 // console.log(66666);
 // 获取输入的内容,判断是否为空
// console.log(this.songName);
if (!this.songName) {return;
  }
  // 发送请求获取歌曲
  let that = this;
   // 为给定 ID 的 user 创建请求
  axios.get('https://autumnfish.cn/search?keywords=' + this.songName)
   .then(res => {
    // console.log(res);
    // 获取当前请求状态和返回的歌曲
    let { status, data } = res;
    if (status == 200) {
      // console.log(data);
     if (data.result.songs) {
      that.songsList = data.result.songs;
      // console.log(that.songsList);
     }
    }
   }).catch(err => {
     console.log(err);
   });
 }
```
（2）第三方音乐接口调用
```javascript
axios.get('https://autumnfish.cn/search?keywords=' + this.songName)

   .then(res => {

    let { status, data } = res;

    if (status == 200) {

      if (data.result.songs) {

      that.songsList = data.result.songs;

     }

    }

   }).catch(err => {

    console.log(err);
```
（3）歌曲列表
```javascript
axios.get('https://autumnfish.cn/search?keywords=' + this.songName)
 .then(res => {
  let { status, data } = res;
  if (status == 200) {
   if (data.result.songs) {
    that.songsList = data.result.songs;
    }
  }
 }).catch(err => {
  console.log(err);
```
（4）播放功能
```javascript
playerSong() {

 let id = window.event.target.dataset.id;
 axios.get('https://autumnfish.cn/song/url?id=' + id).then(res => {
  this.musicUrl = res.data.data[0].url;
  this.showPlaying();
 });
 axios.get('https://autumnfish.cn/song/detail?ids=' + id).then(res => {
  this.playImg = res.data.songs[0].al
   .picUrl
 });
 this.getCommentList(id);
},
```
（5）胶盘的旋转
```javascript
.autoRotate {
   animation-name: Rotate;
   animation-iteration-count: infinite;
   animation-play-state: paused;
   animation-timing-function: linear;
   animation-duration: 5s;
  }
```
（6）歌曲图片的替换旋转
```javascript
showPlaying(){
  this.$refs.cover.classList.add('playing')
  this.$refs.disc.classList.add('playing')
  this.$refs.playBar.classList.add('playing')
 }
```
（7）评论的获取
```javascript
getCommentList(id){
 axios.get('https://autumnfish.cn/comment/hot?id=' + id + '&type=0').then(res => {
  this.hotComment = res.data.hotComments;
  console.log(this.hotComment);
 })
}
```
## 运行结果
![tup](https://i.imgtg.com/2023/06/09/O5lt6c.jpg)


**四、总结及心得体会**

在完成基于Vue的音乐播放器前端Web实验后，我对Vue框架和前端开发有了更深入的理解，并积累了一些宝贵的经验和体会。

首先，通过这个实验，我学会了如何使用Vue框架构建一个具有实际功能的Web应用。Vue提供了丰富的工具和功能，如组件化开发、响应式数据绑定、指令等，使得开发过程更加高效和灵活。我发现Vue的双向数据绑定能够大大简化数据的处理和更新，使得用户界面与数据之间的同步变得更加便捷。

其次，通过调用第三方音乐接口实现音乐的搜索、播放和获取歌曲信息，我了解到了如何与外部API进行交互和数据获取。这拓展了我的视野，让我意识到前端开发不仅仅局限于界面设计和交互，还可以通过调用API获取数据，并将其展示给用户，为用户提供更丰富的功能和体验。

在开发过程中，我也遇到了一些挑战和问题。比如，处理异步操作时需要注意回调函数的使用，合理地处理数据加载的过程，以避免用户体验的延迟。此外，对于音乐播放器来说，控制音频的播放、暂停、切换等功能需要细致地处理，以确保用户能够良好地使用和操作。

通过这个实验，我对前端开发的整个流程有了更清晰的认识，包括需求分析、设计界面、编写代码、调试和优化等。同时，也加深了对团队协作的理解，因为在开发中可能需要与后端开发人员进行协作，确保前后端的数据交互和功能实现的一致性。

总的来说，这个实验让我对Vue框架和前端开发有了更深入的了解和实践，同时也培养了我的问题解决能力和团队合作能力。通过不断学习和实践，我相信我能够在前端开发领域取得更多的进步。

 
