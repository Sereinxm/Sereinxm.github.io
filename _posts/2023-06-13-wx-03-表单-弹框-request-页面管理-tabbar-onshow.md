---
layout: post
title: wx-03，表单-弹框，request，页面管理，tabbar，onshow
date: 2023-06-13 22:22 +0800
categories: [实训-微信小程序]
tags: [课程,微信小程序]     # TAG 名称应始终小写
author: master
---
# 1，表单

## 1，input使用

input默认宽度100%，没有边框。

重要属性

1，value，默认值

2，type，输入框类型

3，password，是否是密码类型

重要事件

1，bindinput，输入改变触发

**input与data双向绑定**

+-----------------------------------------------------------------------+
| \<input model:value="{{age}}" /\>                                     |
|                                                                       |
| {{age}}                                                               |
+-----------------------------------------------------------------------+
| Page({                                                                |
|                                                                       |
| data:{                                                                |
|                                                                       |
| age:78                                                                |
|                                                                       |
| }                                                                     |
|                                                                       |
| })                                                                    |
+-----------------------------------------------------------------------+

## 2，checkbox复选框

多选项目，注意配合label使用，常用属性：

1，value，复选框的值

2，color，复选框颜色，同css

3，checked，是否默认选中

\<checkbox value=\"apple\" checked=\"{{true}}\"
color=\"#00f\"\>\</checkbox\>

若要获得checkbox的值，需要配合：checkbox-group

## 3，checkbox-group - 多项选择器

多项选择器，内部由多个checkbox组成，可轻松获得checkbox选择的数组。

常用属性：

1，bindchange

当内部的checkbox改变时，选中的checkbox的值，会以数组的形式，保存在回调函数参数中的detail.value中

+-----------------------------------------------------------------------+
| \<checkbox-group bindchange=\"tap1\"\>                                |
|                                                                       |
| \<checkbox value=\"apple\"\>\</checkbox\>                             |
|                                                                       |
| \<checkbox value=\"pare\"\>\</checkbox\>                              |
|                                                                       |
| \</checkbox-group\>                                                   |
+-----------------------------------------------------------------------+
| tap1(r){                                                              |
|                                                                       |
| console.log(r.detail.value);                                          |
|                                                                       |
| }                                                                     |
+-----------------------------------------------------------------------+

## 4，label标签

改进表单的可用性，使用for属性找到对应的表单id，或者将控件放在该标签下，当点击时，就会触发对应的控件。

可绑定的控件有：checkbox

也可以当做普通的行内元素使用

# 2，弹框

## 1，showToast提示

消息提示框，类似layui的msg，默认1.5秒后自动消失，常用属性有：

1，title，提示内容

2，icon，提示图标，success/loading/none

3，image，自定义图标的本地路径，image 的优先级高于 icon

4，duration，提示的延迟时间

5，mask，是否显示透明蒙层，防止触摸穿透

+-----------------------------------------------------------------------+
| wx.showToast({                                                        |
|                                                                       |
| title:\"4455\",                                                       |
|                                                                       |
| icon:\"loading\",                                                     |
|                                                                       |
| image:\"../../img/cat.jpg\",                                          |
|                                                                       |
| mask:true                                                             |
|                                                                       |
| })                                                                    |
+-----------------------------------------------------------------------+

## 2，showLoading加载动画

加载提示框，类似layui的load，需要主动关闭，hideLoading关闭加载动画。常用属性有：

1，title，提示内容

2，mask，是否显示透明蒙层，防止触摸穿透

+-----------------------------------------------------------------------+
| wx.showToast({                                                        |
|                                                                       |
| title:\"4455\",                                                       |
|                                                                       |
| icon:\"loading\",                                                     |
|                                                                       |
| image:\"../../img/cat.jpg\",                                          |
|                                                                       |
| mask:true                                                             |
|                                                                       |
| })                                                                    |
+-----------------------------------------------------------------------+
| //hideLoading关闭动画                                                 |
|                                                                       |
| wx.hideLoading();                                                     |
+-----------------------------------------------------------------------+

## 3，showModal模态框

警告确认框

显示模态对话框，类似js的alert和confim，常用属性如下：

1，title，提示标题

2，content，提示内容

3，showCancel，显示取消按钮

4，cancelText，取消按钮内容

5，confirmText，确认按钮内容

6，success，点击确认/取消后的回调，接受参数r

1）若r.confirm为true，点击了确认按钮

2）若r.cancel为true，点击了取消按钮

例如：

+-----------------------------------------------------------------------+
| wx.showModal({                                                        |
|                                                                       |
| title:\"4455\",                                                       |
|                                                                       |
| content:\"999\",                                                      |
|                                                                       |
| success (r){                                                          |
|                                                                       |
| console.log(r)                                                        |
|                                                                       |
| }                                                                     |
|                                                                       |
| })                                                                    |
+-----------------------------------------------------------------------+

# 3，调用ajax数据

## 1，调用ajax数据 - 概述

小程序调用ajax数据，是需要在小程序后台设置域名白名单的，但是也可以绕过白名单限制，模拟线上接口调用。

## 2，绕过域名白名单限制

在小程序开发ide中，依次进行如下操作：

详情 - 本地设置 - 勾选【不校验本地域名】

![OBtHCj.png](https://i.imgtg.com/2023/06/13/OBtHCj.png){width="2.907638888888889in" height="3.11875in"}

## 3，request - 发起ajax请求

具体参考官方文档：

开发 - api - 网络 - 发起请求

发送formdata请求：

+-----------------------------------------------------------------------+
| header: {                                                             |
|                                                                       |
| \'content-type\': \'application/x-www-form-urlencoded\'               |
| //修改此处即可                                                        |
|                                                                       |
| },                                                                    |
+-----------------------------------------------------------------------+

# 4，页面管理

## 1，页面概述

小程序中，每个页面由4个文件组成：

1，页面名.js，页面js逻辑处理，例如生命周期，调用函数，初始化数据

2，页面名.json，类似app.json，只是他只针对当前页面，优先级大于app.json

3，页面名.wxml，存放页面的dom结构

4，页面名.wxss，存放当前页面的样式

## 2，新建页面

由于每个页面都由4个文件组成，所以为了方便管理，建议把每个页面的文件，单独放在一个文件夹中，文件夹可根据需求随意嵌套。

下面以新建help页面为例，注意，新建页面建议在小程序ide中进行，因为他会自动帮我们生成所有文件：

1，在pages目录下新建文件夹help（建议目录名和页面名保持一致）

2，右键单击目录，新建page，输入help即可（自动生成4个文件）

页面新增后，会自动在app.json下的pages字段中，生成一个数组元素。

## 3，新建页面的效果


![OBtDSx.png](https://i.imgtg.com/2023/06/13/OBtDSx.png){width="2.795138888888889in"
height="2.326388888888889in"}

# 5，tabbar

## 1，tabBar概述

tabbar就是小程序底部的tab导航切换，在app.json中进行配置。

参考文档位置：开发 - 框架 - 小程序配置 - 全局配置

小程序底部、顶部可以设置tab切换，最多5个，最少2个。

常用属性：

1，tabBar，tab 上的文字默认颜色

2，selectedColor，tab 上的文字选中时的颜色

3，backgroundColor，tab 的背景色

4，list，tab 的列表

## 2，tabBar.list

list是个数组，里面记录了底部的切换页面数组，注意，第一个元素必须是小程序的首页。每个页面常用属性如下：

1，pagePath，页面路径，必须在 pages 中先定义

2，text，tab 上按钮文字

3，iconPath，图片路径

4，selectedIconPath，选中时的图片路径

# 6，onShow生命周期

生命周期值得是页面从创建，到销毁的整个过程；

onShow，用于监听页面的显示，当页面从隐藏变为显示时触发。

例如：

+-----------------------------------------------------------------------+
| // index.js                                                           |
|                                                                       |
| Page({                                                                |
|                                                                       |
| onShow(){                                                             |
|                                                                       |
| }                                                                     |
|                                                                       |
| })                                                                    |
+-----------------------------------------------------------------------+
